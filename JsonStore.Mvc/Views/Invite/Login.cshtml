
@{
    Layout = null;
}

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Login</title>
    <!-- Bootstrap -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.11.4/themes/smoothness/jquery-ui.css" />
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet" />
    <link href="css/gds_style.css" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/multiple-select/1.2.0/multiple-select.min.css" />
    <link href="~/Content/generics.css" rel="stylesheet" />
    <link href="~/Content/login.css" rel="stylesheet" />
    <link rel="shortcut icon" href='http://www.wakanow.com/en-ae/favicon.ico' />
    <link rel="apple-touch-icon" sizes="57x57" href="http://static.wakanow.com/common/favicon/apple-icon-57x57.png" />
    <link rel="apple-touch-icon" sizes="60x60" href="http://static.wakanow.com/common/favicon/apple-icon-60x60.png" />
    <link rel="apple-touch-icon" sizes="72x72" href="http://static.wakanow.com/common/favicon/apple-icon-72x72.png" />
    <link rel="apple-touch-icon" sizes="76x76" href="http://static.wakanow.com/common/favicon/apple-icon-76x76.png" />
    <link rel="apple-touch-icon" sizes="114x114" href="http://static.wakanow.com/common/favicon/apple-icon-114x114.png" />
    <link rel="apple-touch-icon" sizes="120x120" href="http://static.wakanow.com/common/favicon/apple-icon-120x120.png" />
    <link rel="apple-touch-icon" sizes="144x144" href="http://static.wakanow.com/common/favicon/apple-icon-144x144.png" />
    <link rel="apple-touch-icon" sizes="152x152" href="http://static.wakanow.com/common/favicon/apple-icon-152x152.png" />
    <link rel="apple-touch-icon" sizes="180x180" href="http://static.wakanow.com/common/favicon/apple-icon-180x180.png" />
    <link rel="icon" type="image/png" sizes="192x192" href="http://static.wakanow.com/common/favicon/android-icon-192x192.png" />
    <link rel="icon" type="image/png" sizes="32x32" href="http://static.wakanow.com/common/favicon/favicon-32x32.png" />
    <link rel="icon" type="image/png" sizes="96x96" href="http://static.wakanow.com/common/favicon/favicon-96x96.png" />
    <link rel="icon" type="image/png" sizes="16x16" href="http://static.wakanow.com/common/favicon/favicon-16x16.png" />
    <link rel="manifest" href="http://static.wakanow.com/common/favicon/manifest.json" />
    <meta name="msapplication-TileColor" content="#ffffff" />
    <meta name="msapplication-TileImage" content="http://static.wakanow.com/common/favicon/ms-icon-144x144.png" />
    <meta name="theme-color" content="#ffffff" />

    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <script src="http://cdn.ckeditor.com/4.5.3/basic/ckeditor.js"></script>
    <style>
        label {
            font-weight: normal;
        }

        body {
            background-color: #EEE;
        }

    </style>
</head>
<body>
    <form id="form1" action="~/invite/login" method="post">
        <div>
            <div class="container">
                <div class="card card-container">
                    <img id="profile-img" class="profile-img-card" src="http://static.wakanow.com/en-ng/hotels/img/logo.png">
                    <p id="profile-name" class="profile-name-card">NPS Admin</p>
                    <div class="form-signin">
                        <span id="reauth-email" class="reauth-email"></span>
                        <div class="form-group">
                            <label>Email Address:</label>
                            <input id="email" name="email" type="email" class="form-control" placeholder="Email" onkeyup="doEmail(this)" required>
                            <p class="bg-danger">
                                <span title="User Name is required." style="color:Red;display:none;">User Name is required.</span>
                            </p>
                        </div>
                        <div class="form-group">
                            <label>Password:</label>
                            <input id="password" name="password" type="password" class="form-control" placeholder="Password" onkeyup="doText(this)" required>
                            <p class="bg-danger">
                                <span title="Password is required." style="color:Red;display:none;">Password is required.</span>
                            </p>
                        </div>
                        <p>
                            <input type="submit" name="submit-button" value="Log In" class="btn btn-lg btn-primary btn-block btn-signin">
                        </p>

                        <p class="text-center alert-danger">@ViewData["error-message"]</p>

                        <p class="text-center alert-success">@ViewData["success-message"]</p>

                        <script>
                            String.isNullOrEmpty = function (str) {
                                return str == null || str == '';
                            }

                            function forgotPassword() {
                                var form = document.getElementById("form1");
                                form.action = "forgotpassword";
                                var email = document.getElementById("email").value;
                                var password = document.getElementById("password").value;
                                if (String.isNullOrEmpty(email) || email.search(/.+@@.+\..+/i) < 0) {
                                    $("input[type='email']").each(function () {
                                        $(this).keyup();
                                    });
                                    return;
                                }
                                form.submit();
                                setTimeout(function () {
                                    form.action = "login";
                                }, 250);
                            }
                        </script>
                        
                        <p class="margin-top-20 text-center">
                            <a onclick="forgotPassword()" class="pointer">Forgot password?</a>
                        </p>

                        <p class="top10 text-center">
                            <a href="~/invite" class="greytxt" title="Can't remember your password? Use our one-time login">Use One-Time Login</a>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </form>
    <script src="https://code.jquery.com/jquery-2.2.4.min.js" type="text/javascript"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/multiple-select/1.2.0/multiple-select.min.js"></script>
    <script src="http://code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
    <script src="http://static.wakanow.com/common/general/js/all.js" type="text/javascript"></script>

    <script>
        function url(f) {
            return "@Extensions.Models.Site.GetLeftUrl()" + f;
        }

        function errorhandler(err, obj) {
            console.error(err, obj);
        }

        function MsgBox(txt, type) {
            txt = txt || "Wakanow";
            type = type || "success";
            toastr[type](txt);
        }

        $("#btn_login").click(function () {
            if ($("#email").val().search(/.+@@wakanow\.com/i) < 0) {
                MsgBox("Email must be within the wakanow domain", "error");
                doc.setError(doc.get("email"));
            }
            else {
                $.post(url("invite/create"), { email: $("#email").val() }).success(function (response) {
                    console.log(response);
                    MsgBox(response.Message, response.Status ? 'success' : 'error');
                    $("#email").val("");
                    if (response.Status == true) {
                        $("#emailSuccess").show();
                        $("#emailEntry").hide();
                        $("#emailSuccess p").text(response.Message);
                    }
                }).error(errorhandler);
            }
        });
    </script>
</body>
</html>
